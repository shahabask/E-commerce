<%- include('../layout/header.ejs',{admin:false}) %>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <style>
        body{
            margin-top: 65px;
          
        }
        /* CSS for coupon display */
        .coupon-container {
            display: flex;
            overflow-x: auto;
            margin-bottom: 20px;
            /* overflow-x: hidden;  */
            
            justify-content: center; /* Add this line to center align the coupon cards */
            scrollbar-width: thin; /* For Firefox */
    scrollbar-color: #ccc #f5f5f5; /* For Firefox */
}

.coupon-container::-webkit-scrollbar {
    width: 6px; /* Width of the scrollbar */
}

.coupon-container::-webkit-scrollbar-track {
    background: #f5f5f5; /* Track color */
}

.coupon-container::-webkit-scrollbar-thumb {
    background-color: #ccc; /* Thumb color */
    border-radius: 3px; /* Rounded corners */
}

.coupon-container::-webkit-scrollbar-thumb:hover {
    background-color: #999; /* Thumb color on hover */
}
        .coupon-card {
            flex: 0 0 auto;
            margin: 0 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            background: #fff;
            color:black;
            font-family: Arial, sans-serif;
            font-size: 16px;
            height: auto;
            width: 200px;
            height: 280px;
            transform-origin: center; /* Add this line to fix the bulging effect */
        }

        .coupon-card.active {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        /* CSS for referral banner */
        .referral-banner {
            background:#1283ca ;
            padding: 20px;
            text-align: center;
            color: #fff;
            font-weight: bold;
            width: 50%;
            margin: 0 auto;
            border-radius: 10px;
        }

        .referral-link {
            display: inline-block;
            background: #fff;
            color: #330867;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            transition: background 0.3s ease;
        }

        .referral-link:hover {
            background: #fad0c4;
        }

        /* CSS for heading banner */
        .heading-banner {
            background: white;
            padding: 20px;
            text-align: center;
            color: #1a237e;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .delete-link {
      display: inline-block;
      margin-top: 10px;
      color: #f56c6c;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .delete-link:hover {
      color: #c22e2e;
    }
        /* CSS for coupon code */
.coupon-code {
    font-weight: bold;
    font-family: "Arial", sans-serif;
    font-size: 24px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}

    </style>
</head>
<body>
    <div class="heading-banner">
        <h1 style="font-weight: bold;">Coupons And Rewards</h1>
    </div>

    <div class="referral-banner" style="margin-top: 60px;">
        <h2>Referral Offer</h2>
        <p>Get amazing rewards by referring your friends!</p>
        <a class="referral-link" href="YOUR_REFERRAL_LINK">Check it out</a>
    </div>
        <%if(coupons.length==0){%>
            
            <div>
                <p>hel;kh</p>
            </div>
            <%}else{%>
                <div class="coupon-container" style="margin-top: 100px;margin-bottom: 100px;">
      
                    <% coupons.forEach(function(coupon, index) { %>
                        <div class="coupon-card <%= index === 0 ? 'active' : '' %>">
                           
                
                               <h4 style="font-weight: bold;"  class="coupon-code"><%= coupon.couponCode %></h4>
                       
                            <p><%= coupon.description %></p>
                            <p style="font-weight: 400;">Expiry Date: <%= coupon.expiryDate.toLocaleDateString() %></p>
                            <%if(coupon.status=='Active'){%>
                                
                                <p >Status: <span style="color: green;"><%= coupon.status %></span> </p>
                                <%}else if(coupon.status=='Used'){%>
                                  <p >Status: <span style="color:rgba(19, 21, 99, 0.726);font-weight:bold;"><%= coupon.status %></span> </p>
                                <%}else{%>
                                    <p >Status: <span style="color:rgb(252, 18, 18);font-weight:bold;"><%= coupon.status %></span> </p>
            
                           <%}%>
                          
                            <i class="bi bi-trash-fill delete-link" onclick="deleteCoupon('<%=coupon._id %>')"></i>
                           
                        </div>
                    <% }); %>
                </div>

            <%}%>
    <!-- <div style="width: 50%; margin-left: 380px;margin-top: 30px;"> -->
   
<!-- </div> -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/your-font-awesome-kit.js"></script>
<script>
    // JavaScript for sliding the active coupon card
    const couponCards = document.querySelectorAll('.coupon-card');
    const couponContainer = document.querySelector('.coupon-container');

    couponContainer.addEventListener('scroll', function() {
        const containerWidth = couponContainer.offsetWidth;
        const containerScroll = couponContainer.scrollLeft;
        const cardWidth = couponCards[0].offsetWidth;
        const cardCenter = cardWidth / 2;

        couponCards.forEach(function(card) {
            const cardPos = card.offsetLeft - couponContainer.offsetLeft;
            const cardCenterPos = cardPos + cardCenter;

            if (containerScroll + (containerWidth / 2) >= cardCenterPos && containerScroll + (containerWidth / 2) < cardCenterPos + cardWidth) {
                card.classList.add('active');
            } else {
                card.classList.remove('active');
            }
        });
    });
</script>



<script>

    function deleteCoupon(id){
 const couponId=id
     console.log(couponId)
     console.log(typeof couponId)
        $.ajax({
        url: `/delete-coupon-user?id=+${couponId}`,
        method: 'GET',
        data: {
    
        },
        success: function(response) { 
            console.log('deleted succesfully')
         },
                
        error: function(error) {
          // Handle the error response
          res.send(error.message)
        }
    })
          
    }
</script>





<%- include('../layout/footer.ejs')%>